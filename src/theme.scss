@use '@angular/material' as mat;
@use 'sass:map';

// Custom primary palette based on #394F74 (rgb(57, 79, 116))
// Keeps secondary, neutral, neutral-variant, and error from azure
$custom-blue-palette: map.merge(mat.$azure-palette, (
  0: #000000,
  10: #0F1A2E,
  20: #1E2F48,
  25: #263856,
  30: #2E4264,
  35: #34486C,
  40: #394F74,
  50: #516690,
  60: #6B80AA,
  70: #889BC2,
  80: #A8B8D8,
  90: #CCD5E8,
  95: #E5EAF3,
  98: #F3F5FA,
  99: #F9FAFD,
  100: #FFFFFF,
));

// Define light theme using Material 3 API
$light-app-theme: mat.define-theme((
  color: (
    theme-type: light,
    primary: $custom-blue-palette,
    tertiary: mat.$blue-palette,
  )
));

// Define dark theme
$dark-app-theme: mat.define-theme((
  color: (
    theme-type: dark,
    primary: mat.$azure-palette,
    tertiary: mat.$blue-palette,
  )
));

// Define black theme (same as dark but with custom overrides)
$black-app-theme: mat.define-theme((
  color: (
    theme-type: dark,
    primary: mat.$azure-palette,
    tertiary: mat.$blue-palette,
  )
));

// Apply light theme as the default
@include mat.all-component-themes($light-app-theme);

html.black-theme {
  background-color: #000000;
  color: rgb(236, 236, 236);
}

.black-theme {
  @include mat.all-component-colors($black-app-theme);

  .mat-app-background,
  .mat-toolbar { background-color: #000000; color: rgb(236, 236, 236) }
  .mat-expansion-panel,
  .mat-mdc-card { background-color: #1a1a1a; color: rgb(236, 236, 236) }
  .mat-menu { background-color: #1a1a1a; color: rgb(236, 236, 236) }
  .mat-dialog-container { background-color: #1a1a1a; color: rgb(236, 236, 236) }

  // Fix form field labels and borders visibility
  .mat-mdc-form-field {
    .mat-mdc-text-field-wrapper {
      background-color: #1a1a1a !important;
    }

    // Ensure labels are visible
    .mat-mdc-floating-label {
      color: rgba(255, 255, 255, 0.7) !important;
    }

    // Ensure focused labels are visible
    &.mat-focused .mat-mdc-floating-label {
      color: rgba(255, 255, 255, 0.87) !important;
    }

    // Ensure borders are visible
    .mat-mdc-form-field-bottom-align::before {
      display: none;
    }

    .mdc-text-field--outlined .mdc-notched-outline__leading,
    .mdc-text-field--outlined .mdc-notched-outline__notch,
    .mdc-text-field--outlined .mdc-notched-outline__trailing {
      border-color: rgba(255, 255, 255, 0.3) !important;
    }

    // Ensure focused borders are visible
    &.mat-focused {
      .mdc-text-field--outlined .mdc-notched-outline__leading,
      .mdc-text-field--outlined .mdc-notched-outline__notch,
      .mdc-text-field--outlined .mdc-notched-outline__trailing {
        border-color: rgba(255, 255, 255, 0.87) !important;
      }
    }

    // Ensure input text is visible
    input, textarea {
      color: rgba(255, 255, 255, 0.87) !important;
      caret-color: rgba(255, 255, 255, 0.87) !important;
    }
  }
}

html.dark-theme {
  background-color: rgb(13, 17, 22);
  color: white;
}

.dark-theme {
  @include mat.all-component-colors($dark-app-theme);

  color: white;

  h1, h2, h3, h4, h5, h6 {
    color: white;
  }

  .mat-expansion-panel,
  .mat-mdc-dialog-surface,
  .mat-mdc-menu-panel,
  .mat-mdc-select-panel,
  .mat-mdc-card,
  .mat-toolbar {
    background-color: rgb(37, 41, 47) !important;
    color: white;
  }
  .mat-mdc-text-field-wrapper,
  .mat-app-background {
    background-color: rgb(13, 17, 22) !important;
  }
}

.light-theme {
  @include mat.all-component-colors($light-app-theme);

  .mat-toolbar {
    background-color: var(--mat-card-outlined-container-color, var(--mat-sys-surface));
  }
  .mat-app-background {
    background-color: rgb(255, 255, 255);
  }
}
